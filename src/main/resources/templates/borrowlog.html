<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<!-- Bootstrap利用のため、必要なコード修正禁止 -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
		crossorigin="anonymous"></script>
	<!-- CSS共通リンク -->
	<link rel="stylesheet" href="css/common.css" />
	<!-- タイトルの選択-->
	<title>R-Library: Register</title>
</head>

<body>
	<!-- 画面全体始め（ヘッダー、メイン、フッター）-->

	<div class="content_box">
		<!-- ヘッダー（header_btn_box のみ修正可能（ログイン前後の違い））-->
		<header>
			<div class="header_logo"> <a href="/home"><img src="img/rakuten_logo.png" alt="Rakuten_sec_mark"
						class="main_logo"> </a></div>
			<div class="header_title"> 楽天図書館 </div>
			<div class="header_btn_box">
				<!--ログイン時出力される（お知らせ遷移用アイコン、ユーザー別アイコン）-->
				<table class="header_table">
					<th>
					<td> <img src="img/alarm_icon.png" class="alert_icon"> </td>
					<td> <img src="img/user_img.png" alt="user_icon" class="user_icon"> </td>
					</th>
				</table>
			</div>
		</header>
		<!--メインー（修正可能領域）-->
		<div class="main">
			<!--白い箱-->
			<div class="main_title">
				- レンタル履歴
			</div>
			<!-- メインコンテンツが入る赤色の箱-->
			<div class="main_content_box">
				<Table class="log_table" th:if="${BorrowLogs}">
					<tr>
						<th id="border-right">
							借り出し日付
						</th>
						<th id="border-right">
							タイトル
						</th>
						<th id="border-right">
							本の持ち主
						</th>
						<th>
							期限
						</th>
						<th>
							返す期限変更
						</th>
					</tr>
					<!-- Table rows will be added dynamically here -->
					<tr th:each="log :${BorrowLogs}">
						<td th:text="*{log.TradedDate}" id="border-right"></td>
						<td th:text="*{log.BookTitle}" id="border-right"></td>
						<td th:text="*{log.LenderName}" id="border-right"></td>
						<td th:text="*{log.LimitDate}"></td>
						<!-- added by kk. Use to send change return date request. -->
						<td th:if="${!log.LimitDate.toString().equals('2999-12-31')}">
							変更希望日
							<form th:action="@{/requestNewReturnDate}" th:method="POST">
						        <input type="date" name="newReturnDate" required>
						        <input type="hidden" name="transId" th:value="*{log.TransId}">
						        <button>提出</button>
					        </form>
					    </td>
					    <td th:if="${log.LimitDate.toString().equals('2999-12-31')}">
					        譲渡なので無期限です
					    </td>
					    <!-- until here added by kk. -->
					</tr>
				</Table>
				<!-- Show current page number -->
				<table class="btn_box">
					<tr>
						<td>
							<div class="btn btn-danger" id="smaller_size" th:if="${currentPage} > 1">
								<a th:href="@{/borrowlog(currPage=${currentPage - 1})}">
									&lt
								</a>
							</div>
						</td>
						<td>
							<div id="small_size" style="text-align:center">
								<span th:text="${currentPage}"></span> / <span th:text="${maxPageNum}">
							</div>
						</td>
						<td>
							<div class="btn btn-danger" id="smaller_size" th:if="${currentPage<maxPageNum}">
								<a th:href="@{/borrowlog(currPage=${currentPage + 1})}">
									&gt
								</a>
							</div>
						</td>
					</tr>
					<tr>
						<Td></Td>
						<Td>
							<div>
								<form th:action="@{/home}" th:method="GET">
									<button type="submit" class="btn btn-primary" id="small_size" value="home">
										ホーム</button>
								</form>
							</div>
						</Td>
						<td></td>
					</tr>
				</table>
			</div>
		</div>
		<!-- フッター（修正禁止）-->
		<footer>
			問い合わせ先：rakuten_tarou@rakuten-sec.co.jp
		</footer>


</body>

</html>